[2026-01-28T14:48:07.200Z] Starting MVP Smoke Gate
[2026-01-28T14:48:07.202Z] Project: demo-mvp
[2026-01-28T14:48:07.202Z] Evidence: ../../local-ci/evidence/RC_20260128_164729
[2026-01-28T14:48:07.202Z] Emulator ports: Firestore=8080, Auth=9099, Functions=5001
[2026-01-28T14:48:07.202Z] FIREBASE_AUTH_EMULATOR_HOST: 127.0.0.1:9099
[2026-01-28T14:48:07.202Z] FIRESTORE_EMULATOR_HOST: 127.0.0.1:8080
[2026-01-28T14:48:07.202Z] [1/9] Initializing test environment...
[2026-01-28T14:48:07.224Z] ✓ Test environment initialized
[2026-01-28T14:48:07.224Z] [2/9] Seeding Firestore data...
[2026-01-28T14:48:07.417Z]   Seeded: merchants, offers, users, subscriptions, points_transactions, points_balance
[2026-01-28T14:48:07.417Z] ✓ Firestore data seeded
[2026-01-28T14:48:07.417Z] [3/9] Initializing Admin SDK...
[2026-01-28T14:48:07.417Z] Using auth emulator: 127.0.0.1:9099
[2026-01-28T14:48:08.487Z] ✓ Admin SDK initialized
[2026-01-28T14:48:08.487Z] [4/9] Creating auth users...
[2026-01-28T14:48:08.505Z] ✓ Customer created: test-customer-uid
[2026-01-28T14:48:08.512Z] ✓ Merchant created: test-merchant-uid
[2026-01-28T14:48:08.512Z] ✓ Auth users created
[2026-01-28T14:48:08.552Z]   Updated seed data with UIDs: customer=test-customer-uid, merchant=test-merchant-uid
[2026-01-28T14:48:08.553Z] [5/9] Initializing Firebase Client SDK...
[2026-01-28T14:48:08.571Z] ✓ Client SDK initialized and authenticated
[2026-01-28T14:48:08.571Z] [6/9] Testing getAvailableOffers...
[2026-01-28T14:48:10.004Z]   Validated: 1 offers, first offer has required DTO fields
[2026-01-28T14:48:10.004Z] ✓ getAvailableOffers PASS (1429ms)
[2026-01-28T14:48:10.004Z] [7/9] Testing getOffersByLocationFunc...
[2026-01-28T14:48:10.780Z]   Warning: No offers returned (acceptable if empty)
[2026-01-28T14:48:10.780Z] ✓ getOffersByLocationFunc PASS (776ms)
[2026-01-28T14:48:10.780Z] [8/9] Testing generateQRToken...
[2026-01-28T14:48:11.593Z]   Validated: qr_token exists (404 chars)
[2026-01-28T14:48:11.593Z] ✓ generateQRToken PASS (813ms) - token: eyJ1c2VySWQiOiJ0ZXN0...
[2026-01-28T14:48:11.593Z] [9/9] Testing validateQRToken...
[2026-01-28T14:48:12.382Z]   Validated: QR token callable reachable (PIN verification flow active)
[2026-01-28T14:48:12.382Z] ✓ validateQRToken PASS (784ms)
[2026-01-28T14:48:12.382Z] [9/9a] Testing getBalance...
[2026-01-28T14:48:13.166Z]   Validated: balance=100
[2026-01-28T14:48:13.166Z] ✓ getBalance PASS (780ms)
[2026-01-28T14:48:13.166Z] [9/9b] Testing getPointsHistory...
[2026-01-28T14:48:13.951Z]   Validated: 1 transactions with correct structure
[2026-01-28T14:48:13.951Z] ✓ getPointsHistory PASS (785ms)
[2026-01-28T14:48:13.951Z] 
[2026-01-28T14:48:13.951Z] ═══════════════════════════════════════════════════════════
[2026-01-28T14:48:13.951Z] MVP SMOKE GATE: PASS ✅
[2026-01-28T14:48:13.951Z] Total time: 6749ms
[2026-01-28T14:48:13.951Z] Region: us-central1
[2026-01-28T14:48:13.951Z] Evidence: ../../local-ci/evidence/RC_20260128_164729
[2026-01-28T14:48:13.951Z] ═══════════════════════════════════════════════════════════
