{
  "calls": [
    {
      "name": "getAvailableOffers",
      "response": {
        "success": true,
        "offers": [
          {
            "id": "offer-test-001",
            "title": "Test Offer",
            "description": "Test offer for smoke tests",
            "points_required": 10,
            "points_cost": 10,
            "image_url": "",
            "valid_until": "2027-01-28T14:24:15.340Z",
            "is_active": true,
            "discount_percentage": 10,
            "created_at": null,
            "merchant_id": "merchant-test-001",
            "merchant_name": "",
            "category": "test",
            "distance_km": null,
            "used": false
          }
        ]
      }
    },
    {
      "name": "getOffersByLocationFunc",
      "response": {
        "success": true,
        "offers": [],
        "totalCount": 0
      }
    },
    {
      "name": "generateQRToken",
      "response": {
        "success": true,
        "token": "eyJ1c2VySWQiOiJ0ZXN0LWN1c3RvbWVyLXVpZCIsIm9mZmVySWQiOiJvZmZlci10ZXN0LTAwMSIsIm1lcmNoYW50SWQiOiJ0ZXN0LW1lcmNoYW50LXVpZCIsImRldmljZUhhc2giOiJzbW9rZS10ZXN0LWRldmljZS1oYXNoIiwidGltZXN0YW1wIjoxNzY5NjEwMjU5NzM4LCJleHBpcmVzQXQiOjE3Njk2MTAzMTk3MzgsIm5vbmNlIjoiZGJlMWNkNzY2NDAxNTMwOWJmMmQxMjA2NWMxN2I4YjAiLCJzaWduYXR1cmUiOiI2Mzg4OWY2NDg2MTA2MzNkMjU3ZDUzOTkyNGZlNjE2NzA5NTcyZDFmNGZhMzQzNGZhNzE3NjI4MmYzNGYyOWVjIn0=",
        "displayCode": "537401",
        "expiresAt": "2026-01-28T14:25:19.738Z",
        "qr_token": "eyJ1c2VySWQiOiJ0ZXN0LWN1c3RvbWVyLXVpZCIsIm9mZmVySWQiOiJvZmZlci10ZXN0LTAwMSIsIm1lcmNoYW50SWQiOiJ0ZXN0LW1lcmNoYW50LXVpZCIsImRldmljZUhhc2giOiJzbW9rZS10ZXN0LWRldmljZS1oYXNoIiwidGltZXN0YW1wIjoxNzY5NjEwMjU5NzM4LCJleHBpcmVzQXQiOjE3Njk2MTAzMTk3MzgsIm5vbmNlIjoiZGJlMWNkNzY2NDAxNTMwOWJmMmQxMjA2NWMxN2I4YjAiLCJzaWduYXR1cmUiOiI2Mzg4OWY2NDg2MTA2MzNkMjU3ZDUzOTkyNGZlNjE2NzA5NTcyZDFmNGZhMzQzNGZhNzE3NjI4MmYzNGYyOWVjIn0=",
        "display_code": "537401",
        "expires_at": "2026-01-28T14:25:19.738Z"
      }
    },
    {
      "name": "validateQRToken",
      "response": {
        "success": false,
        "error": "Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"merchant_id\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."
      }
    }
  ],
  "timings": {
    "getAvailableOffers": 1422,
    "getOffersByLocationFunc": 779,
    "generateQRToken": 813,
    "validateQRToken": 779
  },
  "errors": [
    {
      "message": "validateQRToken: Expected success indicator, got: {\"success\":false,\"error\":\"Value for argument \\\"data\\\" is not a valid Firestore document. Cannot use \\\"undefined\\\" as a Firestore value (found in field \\\"merchant_id\\\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.\"}",
      "stack": "Error: validateQRToken: Expected success indicator, got: {\"success\":false,\"error\":\"Value for argument \\\"data\\\" is not a valid Firestore document. Cannot use \\\"undefined\\\" as a Firestore value (found in field \\\"merchant_id\\\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`.\"}\n    at validateQRTokenResponse (file:///Users/mohammadzeineddine/Downloads/URBAN_POINTS_LEBANON_CTO_FORENSIC_HANDOVER/tools/smoke/mvp_smoke.mjs:584:11)\n    at main (file:///Users/mohammadzeineddine/Downloads/URBAN_POINTS_LEBANON_CTO_FORENSIC_HANDOVER/tools/smoke/mvp_smoke.mjs:265:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"
    }
  ]
}