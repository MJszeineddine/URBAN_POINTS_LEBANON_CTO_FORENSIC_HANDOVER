{"version":3,"sources":["../../../../pages/admin/login.tsx","../../../../node_modules/next/src/build/templates/pages.ts"],"sourcesContent":["import { FormEvent, useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\nimport { signInWithEmailAndPassword, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { auth } from '../../lib/firebaseClient';\n\nexport default function AdminLoginPage() {\n  const router = useRouter();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, async user => {\n      if (!user) return;\n      const token = await user.getIdTokenResult(true);\n      if (token.claims.role === 'admin') {\n        router.replace('/admin/dashboard');\n      } else {\n        await signOut(auth);\n      }\n    });\n    return () => unsub();\n  }, [router]);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    try {\n      const cred = await signInWithEmailAndPassword(auth, email.trim(), password);\n      const token = await cred.user.getIdTokenResult(true);\n      if (token.claims.role !== 'admin') {\n        await signOut(auth);\n        setError('Access denied. Admin role is required.');\n        setLoading(false);\n        return;\n      }\n      router.replace('/admin/dashboard');\n    } catch (err: any) {\n      console.error('Login failed', err);\n      setError(err?.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: '100vh', background: '#f7f7f7' }}>\n      <form\n        onSubmit={handleSubmit}\n        style={{ background: '#fff', padding: '24px', borderRadius: '8px', boxShadow: '0 2px 6px rgba(0,0,0,0.05)', minWidth: '320px' }}\n      >\n        <h1 style={{ marginBottom: '16px' }}>Admin Login</h1>\n        <label style={{ display: 'block', marginBottom: '8px' }}>\n          Email\n          <input\n            type=\"email\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            required\n            style={{ width: '100%', padding: '8px', marginTop: '4px', boxSizing: 'border-box' }}\n          />\n        </label>\n        <label style={{ display: 'block', marginBottom: '12px' }}>\n          Password\n          <input\n            type=\"password\"\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            required\n            style={{ width: '100%', padding: '8px', marginTop: '4px', boxSizing: 'border-box' }}\n          />\n        </label>\n        {error && (\n          <div style={{ color: '#b91c1c', marginBottom: '12px', fontSize: '14px' }}>\n            {error}\n          </div>\n        )}\n        <button\n          type=\"submit\"\n          disabled={loading}\n          style={{\n            width: '100%',\n            padding: '10px',\n            background: '#0f172a',\n            color: '#fff',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: loading ? 'not-allowed' : 'pointer'\n          }}\n        >\n          {loading ? 'Signing in...' : 'Sign In'}\n        </button>\n      </form>\n    </div>\n  );\n}\n","import { PagesRouteModule } from '../../server/route-modules/pages/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the app and document modules.\nimport * as document from 'VAR_MODULE_DOCUMENT'\nimport * as app from 'VAR_MODULE_APP'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\nimport { getHandler } from '../../server/route-modules/pages/pages-handler'\n\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps')\nexport const getStaticPaths = hoist(userland, 'getStaticPaths')\nexport const getServerSideProps = hoist(userland, 'getServerSideProps')\nexport const config = hoist(userland, 'config')\nexport const reportWebVitals = hoist(userland, 'reportWebVitals')\n\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(\n  userland,\n  'unstable_getStaticProps'\n)\nexport const unstable_getStaticPaths = hoist(\n  userland,\n  'unstable_getStaticPaths'\n)\nexport const unstable_getStaticParams = hoist(\n  userland,\n  'unstable_getStaticParams'\n)\nexport const unstable_getServerProps = hoist(\n  userland,\n  'unstable_getServerProps'\n)\nexport const unstable_getServerSideProps = hoist(\n  userland,\n  'unstable_getServerSideProps'\n)\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n  definition: {\n    kind: RouteKind.PAGES,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  components: {\n    // default export might not exist when optimized for data only\n    App: app.default,\n    Document: document.default,\n  },\n  userland,\n})\n\nexport const handler = getHandler({\n  srcPage: 'VAR_DEFINITION_PAGE',\n  config,\n  userland,\n  routeModule,\n  getStaticPaths,\n  getStaticProps,\n  getServerSideProps,\n})\n"],"names":["PagesRouteModule","RouteKind","hoist","document","app","userland","getHandler","getStaticProps","getStaticPaths","getServerSideProps","config","reportWebVitals","unstable_getStaticProps","unstable_getStaticPaths","unstable_getStaticParams","unstable_getServerProps","unstable_getServerSideProps","routeModule","definition","kind","PAGES","page","pathname","bundlePath","filename","distDir","process","env","__NEXT_RELATIVE_DIST_DIR","relativeProjectDir","__NEXT_RELATIVE_PROJECT_DIR","components","App","default","Document","handler","srcPage"],"mappings":"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","ignoreList":[1]}